USE r1 AS REFERENCE 46*40'58"/117*19'21"

CREATE TRACK STRAIGHT track1 REFERENCE $r1 DELTA START 50:-50 END +50:+50
CREATE TRACK CURVE track2 REFERENCE $r1 DELTA START -50:+50 END +50:+50 DISTANCE ORIGIN +5
CREATE TRACK STRAIGHT track3 REFERENCE $r1 DELTA START -50:+50 END -50:-50
CREATE TRACK CURVE track4 REFERENCE $r1 DELTA START +50:-50 END -50:-50 DISTANCE ORIGIN -5
CREATE TRACK LAYOUT oval WITH TRACKS track1 track2 track3 track4

CREATE STOCK ENGINE engine1 AS DIESEL ON TRACK track2 DISTANCE 30 FROM END FACING END
CREATE STOCK CAR box1 AS BOX
CREATE STOCK CAR flatbed1 AS FLATBED
CREATE STOCK CAR passenger1 AS PASSENGER
CREATE STOCK CAR tank1 AS TANK
CREATE STOCK CAR tender1 AS TENDER
CREATE STOCK CAR caboose1 AS CABOOSE

LOCATE STOCK box1 ON TRACK track2 DISTANCE 50.6 FROM END
LOCATE STOCK flatbed1 ON TRACK track2 DISTANCE 58.6 FROM END
LOCATE STOCK passenger1 ON TRACK track2 DISTANCE 71.6 FROM END
LOCATE STOCK tank1 ON TRACK track2 DISTANCE 88.6 FROM END
LOCATE STOCK tender1 ON TRACK track2 DISTANCE 100.6 FROM END
LOCATE STOCK caboose1 ON TRACK track2 DISTANCE 108.6 FROM END

COUPLE STOCK engine1 AND box1
COUPLE STOCK box1 AND flatbed1
COUPLE STOCK flatbed1 AND passenger1
COUPLE STOCK passenger1 AND tank1
COUPLE STOCK tank1 AND tender1
COUPLE STOCK tender1 AND caboose1

COMMIT

OPEN VIEW myview1 ORIGIN $r1 WORLD WIDTH 500 SCREEN WIDTH 800 HEIGHT 800

DO SET REFERENCE ENGINE engine1

DO SET engine1 SPEED 20

@WAIT 30
UNCOUPLE STOCK engine1 AND box1
UNCOUPLE STOCK box1 AND flatbed1
UNCOUPLE STOCK flatbed1 AND passenger1
UNCOUPLE STOCK passenger1 AND tank1
UNCOUPLE STOCK tank1 AND tender1
UNCOUPLE STOCK tender1 AND caboose1
