USE r1 AS REFERENCE 10*10'10"/10*10'10"

CREATE TRACK SWITCH TURNOUT track1 REFERENCE $r1 STRAIGHT DELTA START +50:-50 END 50:0 CURVE DELTA START 50:-50 END +145:+75 DISTANCE ORIGIN +110
CREATE TRACK SWITCH TURNOUT track2 REFERENCE $r1 STRAIGHT DELTA START +50:+50 END 50:0 CURVE DELTA START +145:-75 END 50:50 DISTANCE ORIGIN +110
CREATE TRACK CURVE track3 REFERENCE $r1 DELTA START +145:+75 END +145:-75 DISTANCE ORIGIN +5
CREATE TRACK CURVE track4 REFERENCE $r1 DELTA START -50:+50 END +50:+50 DISTANCE ORIGIN +5
CREATE TRACK STRAIGHT track5 REFERENCE $r1 DELTA START -50:+50 END -50:-50
CREATE TRACK CURVE track6 REFERENCE $r1 DELTA START +50:-50 END -50:-50 DISTANCE ORIGIN -5

CREATE TRACK LAYOUT oval WITH TRACKS track1 track2 track3 track4 track5 track6

CREATE STOCK ENGINE engine1 AS DIESEL ON TRACK track5 DISTANCE 1 FROM START FACING END
CREATE STOCK ENGINE engine2 AS DIESEL ON TRACK track6 DISTANCE 1 FROM START FACING END

CREATE STOCK CAR box1_1 AS BOX
CREATE STOCK CAR box1_2 AS BOX
CREATE STOCK CAR box1_3 AS BOX
CREATE STOCK CAR box1_4 AS BOX
CREATE STOCK CAR box1_5 AS BOX
CREATE STOCK CAR caboose1 AS CABOOSE

CREATE STOCK CAR box2_1 AS BOX
CREATE STOCK CAR box2_2 AS BOX
CREATE STOCK CAR box2_3 AS BOX
CREATE STOCK CAR box2_4 AS BOX
CREATE STOCK CAR box2_5 AS BOX
CREATE STOCK CAR caboose2 AS CABOOSE

LOCATE STOCK box1_1 ON TRACK track5 DISTANCE 21.5 FROM START
LOCATE STOCK box1_2 ON TRACK track5 DISTANCE 31.5 FROM START
LOCATE STOCK box1_3 ON TRACK track5 DISTANCE 41.5 FROM START
LOCATE STOCK box1_4 ON TRACK track5 DISTANCE 51.5 FROM START
LOCATE STOCK box1_5 ON TRACK track5 DISTANCE 61.5 FROM START
LOCATE STOCK caboose1 ON TRACK track5 DISTANCE 69 FROM START

LOCATE STOCK box2_1 ON TRACK track6 DISTANCE 21.5 FROM START
LOCATE STOCK box2_2 ON TRACK track6 DISTANCE 31.5 FROM START
LOCATE STOCK box2_3 ON TRACK track6 DISTANCE 41.5 FROM START
LOCATE STOCK box2_4 ON TRACK track6 DISTANCE 51.5 FROM START
LOCATE STOCK box2_5 ON TRACK track6 DISTANCE 61.5 FROM START
LOCATE STOCK caboose2 ON TRACK track6 DISTANCE 69 FROM START

COUPLE STOCK engine1 AND box1_1
COUPLE STOCK box1_1 AND box1_2
COUPLE STOCK box1_2 AND box1_3
COUPLE STOCK box1_3 AND box1_4
COUPLE STOCK box1_4 AND box1_5
COUPLE STOCK box1_5 AND caboose1

COUPLE STOCK engine2 AND box2_1
COUPLE STOCK box2_1 AND box2_2
COUPLE STOCK box2_2 AND box2_3
COUPLE STOCK box2_3 AND box2_4
COUPLE STOCK box2_4 AND box2_5
COUPLE STOCK box2_5 AND caboose2

COMMIT

OPEN VIEW myview1 ORIGIN $r1 WORLD WIDTH 1000 SCREEN WIDTH 800 HEIGHT 800

DO SET REFERENCE ENGINE engine1
DO SET REFERENCE ENGINE engine2

DO SELECT SWITCH track1 PATH SECONDARY

@DO FORCE engine2 SPEED 100
@WAIT 10
@DO FORCE engine2 SPEED 0
DO SELECT SWITCH track1 PATH PRIMARY
@DO FORCE engine1 SPEED 100
